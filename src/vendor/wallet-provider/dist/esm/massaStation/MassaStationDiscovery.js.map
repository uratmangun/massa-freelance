{"version":3,"file":"MassaStationDiscovery.js","sourceRoot":"","sources":["../../../src/massaStation/MassaStationDiscovery.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,iBAAiB,EAAE,MAAM,sBAAsB,CAAC;AACzD,OAAO,EAAuB,UAAU,EAAE,MAAM,kBAAkB,CAAC;AAGnE,4CAA4C;AAC5C,MAAM,WAAW,GAAG,cAAc,CAAC;AACnC,MAAM,aAAa,GAAG,YAAY,CAAC;AACnC,MAAM,OAAO,GAAG,IAAI,CAAC;AAErB,KAAK,UAAU,eAAe;IAC5B,OAAO,UAAU,CACf,iBAAiB,GAAG,gBAAgB,EACpC,OAAO,CACR,CAAC;AACJ,CAAC;AAED,SAAS,gBAAgB,CAAC,OAAqB;IAC7C,OAAO,OAAO,CAAC,IAAI,CACjB,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,IAAI,KAAK,WAAW,IAAI,MAAM,CAAC,MAAM,KAAK,aAAa,CAC3E,CAAC;AACJ,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,uBAAuB;IAC3C,IAAI;QACF,MAAM,eAAe,EAAE,CAAC;QACxB,OAAO,IAAI,CAAC;KACb;IAAC,OAAO,CAAC,EAAE;QACV,OAAO,KAAK,CAAC;KACd;AACH,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,oBAAoB;IACxC,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,eAAe,EAAE,CAAC;QAC3C,MAAM,YAAY,GAAG,gBAAgB,CAAC,MAAM,CAAC,CAAC;QAC9C,OAAO,CAAC,CAAC,YAAY,IAAI,YAAY,CAAC,MAAM,KAAK,IAAI,CAAC;KACvD;IAAC,OAAO,CAAC,EAAE;QACV,OAAO,KAAK,CAAC;KACd;AACH,CAAC","sourcesContent":["import { MASSA_STATION_URL } from './MassaStationWallet';\nimport { JsonRpcResponseData, getRequest } from './RequestHandler';\nimport { PluginInfo } from './types';\n\n// Constants for URLs and plugin information\nconst PLUGIN_NAME = 'Massa Wallet';\nconst PLUGIN_AUTHOR = 'Massa Labs';\nconst TIMEOUT = 4000;\n\nasync function fetchPluginData(): Promise<JsonRpcResponseData<PluginInfo[]>> {\n  return getRequest<PluginInfo[]>(\n    MASSA_STATION_URL + 'plugin-manager',\n    TIMEOUT,\n  );\n}\n\nfunction findWalletPlugin(plugins: PluginInfo[]): PluginInfo | undefined {\n  return plugins.find(\n    (plugin) => plugin.name === PLUGIN_NAME && plugin.author === PLUGIN_AUTHOR,\n  );\n}\n\nexport async function isMassaStationAvailable(): Promise<boolean> {\n  try {\n    await fetchPluginData();\n    return true;\n  } catch (_) {\n    return false;\n  }\n}\n\nexport async function isMassaWalletEnabled(): Promise<boolean> {\n  try {\n    const { result } = await fetchPluginData();\n    const walletPlugin = findWalletPlugin(result);\n    return !!walletPlugin && walletPlugin.status === 'Up';\n  } catch (_) {\n    return false;\n  }\n}\n"]}