{"version":3,"file":"RequestHandler.js","sourceRoot":"","sources":["../../../src/massaStation/RequestHandler.ts"],"names":[],"mappings":"AAAA;;;;;;;;GAQG;AACH,OAAO,KAAwB,MAAM,OAAO,CAAC;AAE7C,MAAM,cAAc,GAAG;IACrB,MAAM,EACJ,kFAAkF;IACpF,cAAc,EAAE,kBAAkB;CACnC,CAAC;AAQF;;;;;GAKG;AACH,SAAS,gBAAgB,CAAC,KAAU;IAClC,MAAM,GAAG,GAAG,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,OAAO;QACvC,CAAC,CAAC,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAChD,CAAC,CAAC,IAAI,KAAK,CAAC,eAAe,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;IAC/C,MAAM,GAAG,CAAC;AACZ,CAAC;AAED;;;;;;;GAOG;AACH,MAAM,CAAC,KAAK,UAAU,UAAU,CAC9B,GAAW,EACX,OAAgB;IAEhB,IAAI;QACF,MAAM,IAAI,GAAG,MAAM,KAAK,CAAC,GAAG,CAAiC,GAAG,EAAE;YAChE,OAAO,EAAE,cAAc;YACvB,OAAO;SACR,CAAC,CAAC;QACH,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;KAC9B;IAAC,OAAO,KAAK,EAAE;QACd,gBAAgB,CAAC,KAAK,CAAC,CAAC;KACzB;AACH,CAAC;AAED;;;;;;;;GAQG;AACH,MAAM,CAAC,KAAK,UAAU,WAAW,CAC/B,GAAW,EACX,IAAY;IAEZ,IAAI;QACF,MAAM,IAAI,GAAG,MAAM,KAAK,CAAC,IAAI,CAAiC,GAAG,EAAE,IAAI,EAAE;YACvE,OAAO,EAAE,cAAc;SACxB,CAAC,CAAC;QAEH,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;KAC9B;IAAC,OAAO,KAAK,EAAE;QACd,gBAAgB,CAAC,KAAK,CAAC,CAAC;KACzB;AACH,CAAC;AAED;;;;;;;GAOG;AACH,MAAM,CAAC,KAAK,UAAU,aAAa,CACjC,GAAW;IAEX,IAAI;QACF,MAAM,IAAI,GAAG,MAAM,KAAK,CAAC,MAAM,CAAiC,GAAG,EAAE;YACnE,OAAO,EAAE,cAAc;SACxB,CAAC,CAAC;QAEH,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;KAC9B;IAAC,OAAO,KAAK,EAAE;QACd,gBAAgB,CAAC,KAAK,CAAC,CAAC;KACzB;AACH,CAAC;AAED;;;;;;;;GAQG;AACH,MAAM,CAAC,KAAK,UAAU,UAAU,CAC9B,GAAW,EACX,IAAY;IAEZ,IAAI;QACF,MAAM,IAAI,GAAG,MAAM,KAAK,CAAC,GAAG,CAAiC,GAAG,EAAE,IAAI,EAAE;YACtE,OAAO,EAAE,cAAc;SACxB,CAAC,CAAC;QAEH,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;KAC9B;IAAC,OAAO,KAAK,EAAE;QACd,gBAAgB,CAAC,KAAK,CAAC,CAAC;KACzB;AACH,CAAC","sourcesContent":["/**\n * This file defines a TypeScript module with methods for performing GET, POST and DELETE http requests.\n *\n * @remarks\n * - The methods implemented here are quite generic and might be useful in other contexts too\n *  but have been particularly developed for making http calls specific to MassaStation's server API\n * - If you want to work on this repo, you will probably be interested in this object\n *\n */\nimport axios, { AxiosResponse } from 'axios';\n\nconst requestHeaders = {\n  Accept:\n    'application/json,text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',\n  'Content-Type': 'application/json',\n};\n/**\n * This interface represents a payload returned by making an http call\n */\nexport type JsonRpcResponseData<T> = {\n  result: T;\n};\n\n/**\n * Handles errors from Axios requests.\n *\n * @param error - The error object thrown by Axios.\n * @throws a formatted error message.\n */\nfunction handleAxiosError(error: any): never {\n  const err = error.response?.data?.message\n    ? new Error(String(error.response.data.message))\n    : new Error('Axios error: ' + String(error));\n  throw err;\n}\n\n/**\n * This method makes a GET request to an http rest point.\n *\n *\n * @param url - The url to call.\n * @returns a Promise that resolves to an instance of JsonRpcResponseData.\n *\n */\nexport async function getRequest<T>(\n  url: string,\n  timeout?: number,\n): Promise<JsonRpcResponseData<T>> {\n  try {\n    const resp = await axios.get<unknown, AxiosResponse, object>(url, {\n      headers: requestHeaders,\n      timeout,\n    });\n    return { result: resp.data };\n  } catch (error) {\n    handleAxiosError(error);\n  }\n}\n\n/**\n * This method makes a POST request to an http rest point.\n *\n *\n * @param url - The url to call.\n * @param body - The body of the request.\n * @returns a Promise that resolves to an instance of JsonRpcResponseData.\n *\n */\nexport async function postRequest<T>(\n  url: string,\n  body: object,\n): Promise<JsonRpcResponseData<T>> {\n  try {\n    const resp = await axios.post<unknown, AxiosResponse, object>(url, body, {\n      headers: requestHeaders,\n    });\n\n    return { result: resp.data };\n  } catch (error) {\n    handleAxiosError(error);\n  }\n}\n\n/**\n * This method makes a DELETE request to an http rest point.\n *\n *\n * @param url - The url to call.\n * @returns a Promise that resolves to an instance of JsonRpcResponseData.\n *\n */\nexport async function deleteRequest<T>(\n  url: string,\n): Promise<JsonRpcResponseData<T>> {\n  try {\n    const resp = await axios.delete<unknown, AxiosResponse, object>(url, {\n      headers: requestHeaders,\n    });\n\n    return { result: resp.data };\n  } catch (error) {\n    handleAxiosError(error);\n  }\n}\n\n/**\n * This method makes a PUT request to an http rest point.\n *\n *\n * @param url - The url to call.\n * @param body - The body of the request.\n * @returns a Promise that resolves to an instance of JsonRpcResponseData.\n *\n */\nexport async function putRequest<T>(\n  url: string,\n  body: object,\n): Promise<JsonRpcResponseData<T>> {\n  try {\n    const resp = await axios.put<unknown, AxiosResponse, object>(url, body, {\n      headers: requestHeaders,\n    });\n\n    return { result: resp.data };\n  } catch (error) {\n    handleAxiosError(error);\n  }\n}\n"]}